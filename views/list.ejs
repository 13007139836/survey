<%- include header %> 
        <div class="content mdl-grid--no-spacing">
            <div class="mdl-components mdl-js-components mdl-grid mdl-grid--no-spacing allheight">
                <%- include aside %>
                <main class="mdl-components__pages mdl-cell mdl-cell--10-col ">
                    <div class="mdl-grid">
                       <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp list-table">
                            <thead>
                                <tr>
                                    <th class="mdl-data-table__cell--non-numeric">问卷ID</th>
                                    <th>标题</th>
                                    <th>创建时间</th>
                                    <th>创建人</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                            <% data.forEach(function(tag,index){ %>
                                <tr id="<%=tag.id%>">
                                    <td class="mdl-data-table__cell--non-numeric"><%= tag.id %></td>
                                    <td class="titlemore"><%= tag.title %></td>
                                    <td><%= tag.createdAt %></td>
                                    <td><%= tag.adminId %></td>
                                    <td>
                                        <a class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" href="/survey/p/<%=tag.id%>" target="_blank">查看</a>
                                        <!-- <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect Teal">修改</button> -->
                                        <a class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect Pink delbtn">删除</a>
                                    </td>
                                </tr>
                            <% }) %>
                            </tbody>
                        </table> 
                        <div id="Pagination"></div>
                    </div>
                </main>
            </div>
        </div>
    </div>
<script>
/**
 * material design消息提示
 * @param  {string} msg 消息内容
 */
function showTips(msg){
    var notification = document.querySelector('.mdl-js-snackbar');
    var data = {
        message: msg,
        timeout: 3000
    };
    notification.MaterialSnackbar.showSnackbar(data);  
}
//删除问卷
$('.delbtn').click(function(){
    var id = $(this).parents('tr').attr('id');
    $.ajax({
        type:'GET',
        url:'/survey/list/del/'+id,
        success:function(result){
            if( result.status == 1 ){
                showTips('删除成功');
                $('#'+id).remove();
            }else{
                showTips('删除失败，请重新尝试');
            }
        },
        error:function(e){
            console.log(e);
            showTips('删除失败，请重新尝试');
        }
    })
});
//分页
var options = {  
    currentPage:"<%=currentPage%>",  
    totalPages:"<%=totalPages%>",  
    size:"large",  
    alignment:"center",  
    itemContainerClass: function (type, page, current) {  
        return (page === current) ? "active" : "pointer-cursor";  
    },  
    onPageClicked: function(e,originalEvent,type,page){  
        //alert("Page item clicked, type: "+type+" page: "+page);  
    },  
    onPageChanged: function(e,oldPage,newPage){  
        //alert("Current page changed, old: "+oldPage+" new: "+newPage);  
    },  
    pageUrl:function(type,page,current){  
        return "/survey/list/"+page;  
    }  
};

$("#Pagination").bootstrapPaginator(options);
</script>
<%- include footer %>                                         